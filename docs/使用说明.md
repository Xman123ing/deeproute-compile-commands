# DeepRoute Compile Commands 使用说明

> 🚀 在 Cursor IDE 中快速执行 Shell 命令的强大工具  
> 支持本地执行、Docker 容器执行，一键运行常用命令

**版本**: 1.6.2  
**更新日期**: 2026-01-21

---

## 📖 目录

- [简介](#简介)
- [核心功能](#核心功能)
- [安装方法](#安装方法)
- [快速上手](#快速上手)
- [详细配置](#详细配置)
- [使用教程](#使用教程)
- [高级功能](#高级功能)
- [最佳实践](#最佳实践)
- [常见问题](#常见问题)
- [故障排查](#故障排查)

---

## 简介

### 这是什么？

**DeepRoute Compile Commands** 是一款专为 Cursor IDE 设计的命令行执行插件，让你在 IDE 中无需切换到终端窗口，就能快速执行常用的 Shell 命令。

### 为什么需要它？

**场景 1：频繁的编译命令**
```
传统方式：
1. 切换到终端
2. 输入 bazel build //project/...
3. 等待输出
4. 切换回编辑器

使用插件：
1. 点击预设命令
2. 完成！
```

**场景 2：Docker 容器开发**
```
传统方式：
docker exec -it -u $(id -u):$(id -g) -w /sandbox/project container_name bazel build //...

使用插件：
配置一次，永久点击执行
```

### 核心优势

- ✅ **预设命令** - 一键执行常用命令，告别重复输入
- ✅ **Docker 集成** - 自动在容器内执行，无需手动进入
- ✅ **实时输出** - 命令输出实时显示，不错过任何信息
- ✅ **历史记录** - 自动保存执行历史，快速重复执行
- ✅ **clangd 联动** - 自动检测 `compile_commands.json` 更新并重启语言服务
- ✅ **路径修正** - 自动将容器路径转换为本地路径，确保代码跳转正常

---

## 核心功能

### 1️⃣ 预设命令管理

在 TreeView 侧边栏管理你的常用命令：

```
📚 PREDEFINED COMMANDS
  ├─ 🔨 编译整个项目
  ├─ ✅ 运行单元测试
  ├─ 📦 打包发布版本
  └─ 🧹 清理构建缓存
```

**支持功能**：
- ✏️ 添加新命令
- 🏷️ 设置命令别名（支持 emoji）
- 📝 编辑别名
- 🗑️ 删除命令
- ▶️ 一键执行

### 2️⃣ Docker 容器执行

无缝在 Docker 容器内执行命令：

```json
{
  "deeproute-compile-commands.dockerContainerName": "my-dev-container"
}
```

**自动处理**：
- ✅ 自动启动容器（如果未运行）
- ✅ 自动映射工作目录
- ✅ 自动匹配用户权限（避免权限问题）
- ✅ 自动处理容器内路径

### 3️⃣ 智能 clangd 集成

自动检测 C/C++ 编译数据库变化：

```
执行 bazel build //...
    ↓
检测到 compile_commands.json 更新
    ↓
自动替换 /sandbox → /home/user/project
    ↓
自动执行 clangd: Restart language server
    ↓
代码跳转、自动补全恢复正常 ✅
```

### 4️⃣ 命令历史

自动保存所有执行过的命令：

```
📜 COMMAND HISTORY
  ├─ ⚫ bazel build //blc/...
  ├─ ⚫ bazel test //blc/common:all
  └─ ⚫ git status
```

**特性**：
- 鼠标悬停查看完整命令和执行路径
- 点击快速重复执行
- 插件更新或 IDE 重启后依然保留

### 5️⃣ 自定义命令

临时执行一次性命令：

```
⌨️ EXECUTE CUSTOM COMMAND
    ↓ 点击
输入命令: npm install lodash
输入路径: frontend/
    ↓ 确认
执行完成 ✅
```

---

## 安装方法

### 方法 1：从 VSIX 安装（推荐）

1. **获取安装包**
   ```bash
   # 如果你有源代码
   cd deeproute-compile-commands
   npm install
   npm run package
   # 生成 deeproute-compile-commands-1.6.2.vsix
   ```

2. **安装到 Cursor**
   - 打开 Cursor IDE
   - 按 `Cmd+Shift+P` (macOS) 或 `Ctrl+Shift+P` (Windows/Linux)
   - 输入 `Extensions: Install from VSIX...`
   - 选择生成的 `.vsix` 文件
   - 重启 Cursor

3. **验证安装**
   - 左侧活动栏应出现插件图标
   - 或在扩展列表中搜索 "DeepRoute Compile Commands"

### 方法 2：开发模式安装

```bash
# 1. 克隆或复制项目到本地
cd ~/cursor-extensions
cp -r /path/to/deeproute-compile-commands .

# 2. 安装依赖
cd deeproute-compile-commands
npm install

# 3. 编译
npm run compile

# 4. 在 Cursor 中打开
code . # 或使用 Cursor 打开此目录

# 5. 按 F5 启动调试
```

---

## 快速上手

### 第一步：配置 Docker（可选）

如果你在 Docker 容器内开发：

1. **打开设置**
   - 按 `Cmd+,` (macOS) 或 `Ctrl+,` (Windows/Linux)
   - 搜索 `deeproute-compile-commands`

2. **设置容器名称**
   ```json
   {
     "deeproute-compile-commands.dockerContainerName": "deeproute-dev-x86-2004"
   }
   ```

3. **验证容器**
   ```bash
   docker ps -a | grep deeproute-dev-x86-2004
   # 应该能看到你的容器
   ```

### 第二步：添加预设命令

1. **点击 TreeView 中的 `+` 按钮**
   - 或右键 `PREDEFINED COMMANDS` → `Add Command`

2. **填写命令信息**
   ```
   命令内容: bazel build //blc/...
   执行路径: blc
   命令别名: 🔨 编译 BLC 模块
   ```

3. **确认添加**
   - 新命令出现在列表中
   - 配置自动保存到 `settings.json`

### 第三步：执行命令

1. **点击预设命令**
   - 命令开始执行
   - 输出面板自动打开

2. **查看输出**
   ```
   ========================================
   Executing: bazel build //blc/...
   🐳 Docker Mode: Yes
   Container: deeproute-dev-x86-2004
   📁 Working Dir: /sandbox/blc
   Time: 2026-01-21 10:30:00
   ========================================
   
   [1 / 100] Analyzing...
   [50 / 100] Compiling...
   [100 / 100] Linking...
   
   Command executed successfully (exit code: 0)
   ⏱️ Execution time: 45.2s
   ```

3. **等待完成**
   - 成功：显示绿色成功消息
   - 失败：显示红色错误消息和退出码

---

## 详细配置

### 配置文件位置

**用户级配置**：`~/.cursor/User/settings.json`  
**工作区配置**：`<workspace>/.vscode/settings.json`

### 配置项详解

#### 1. `dockerContainerName`

**说明**：Docker 容器名称，设置后所有命令在容器内执行

```json
{
  "deeproute-compile-commands.dockerContainerName": "my-dev-container"
}
```

**类型**：`string`  
**默认值**：`""`（不使用 Docker）  
**示例**：
- `"deeproute-dev-x86-2004"`
- `"ubuntu-build-env"`
- `"cpp-dev-container"`

**注意事项**：
- ⚠️ 容器必须已创建（可以是停止状态，插件会自动启动）
- ⚠️ 容器必须支持 `bash` 或 `sh`
- ⚠️ 确保容器挂载了项目目录

#### 2. `predefinedCommands`

**说明**：预设命令列表

**格式 1：简单字符串**（向后兼容）
```json
{
  "deeproute-compile-commands.predefinedCommands": [
    "npm install",
    "npm run build",
    "git status"
  ]
}
```

**格式 2：完整对象**（推荐）
```json
{
  "deeproute-compile-commands.predefinedCommands": [
    {
      "command": "bazel build //blc/...",
      "cwd": "blc",
      "alias": "🔨 编译 BLC 模块"
    },
    {
      "command": "bazel test //blc/common:all",
      "cwd": "blc",
      "alias": "✅ 测试公共库"
    },
    {
      "command": "git log --oneline -10",
      "alias": "📜 查看最近提交"
    }
  ]
}
```

**字段说明**：

| 字段 | 必填 | 类型 | 说明 |
|------|------|------|------|
| `command` | ✅ | `string` | 要执行的命令 |
| `cwd` | ❌ | `string` | 执行路径（相对于工作区根目录） |
| `alias` | ❌ | `string` | 显示别名（支持 emoji） |

**注意事项**：
- ✅ `cwd` 为空时在工作区根目录执行
- ✅ `alias` 为空时显示原命令
- ✅ 支持多行命令（用 `&&` 或 `;` 连接）
- ⚠️ 避免使用需要交互的命令（如 `vim`、`top`）

### 完整配置示例

```json
{
  // Docker 配置
  "deeproute-compile-commands.dockerContainerName": "deeproute-dev-x86-2004",
  
  // 预设命令
  "deeproute-compile-commands.predefinedCommands": [
    // C++ 项目编译
    {
      "command": "bazel build //blc/...",
      "cwd": "blc",
      "alias": "🔨 完整编译 BLC"
    },
    {
      "command": "bazel build //blc/... --compilation_mode=opt",
      "cwd": "blc",
      "alias": "🚀 优化编译 BLC"
    },
    
    // 测试命令
    {
      "command": "bazel test //blc/common:all",
      "cwd": "blc",
      "alias": "✅ 测试公共模块"
    },
    {
      "command": "bazel test //blc/... --test_output=errors",
      "cwd": "blc",
      "alias": "🧪 测试全部（仅错误）"
    },
    
    // 清理命令
    {
      "command": "bazel clean",
      "cwd": "blc",
      "alias": "🧹 清理构建缓存"
    },
    
    // Git 命令
    {
      "command": "git status",
      "alias": "📊 Git 状态"
    },
    {
      "command": "git log --oneline --graph -20",
      "alias": "📜 Git 历史"
    },
    
    // 其他实用命令
    {
      "command": "du -sh * | sort -h",
      "alias": "📦 目录大小统计"
    },
    {
      "command": "ps aux | grep bazel",
      "alias": "🔍 查找 Bazel 进程"
    }
  ]
}
```

---

## 使用教程

### 场景 1：编译 C++ 项目

**需求**：在 Docker 容器内编译 Bazel 项目，并自动更新 clangd

**配置**：
```json
{
  "deeproute-compile-commands.dockerContainerName": "cpp-dev",
  "deeproute-compile-commands.predefinedCommands": [
    {
      "command": "bazel build //...",
      "cwd": "src",
      "alias": "🔨 完整编译"
    }
  ]
}
```

**步骤**：
1. 点击 TreeView 中的 "🔨 完整编译"
2. 插件自动：
   - 启动 Docker 容器（如果未运行）
   - 在容器内的 `/sandbox/src` 执行编译
   - 监控 `compile_commands.json` 变化
   - 替换路径：`/sandbox/src` → `/home/user/project/src`
   - 重启 clangd 语言服务器
3. 编译完成后，代码补全和跳转恢复正常

**输出示例**：
```
========================================
Executing: bazel build //...
🐳 Docker Mode: Yes
Container: cpp-dev
📁 Working Dir: /sandbox/src
========================================

Starting Docker container 'cpp-dev'...
✅ Container started successfully

INFO: Analyzed 256 targets
[1,234 / 2,456] Compiling src/main.cc
[2,456 / 2,456] Linking //src:main

Command executed successfully (exit code: 0)
⏱️ Execution time: 123.4s

📝 Detected compile_commands.json update
🔄 Replacing /sandbox paths with /home/user/project...
✅ Successfully replaced 1,234 lines in 45.2s
♻️ Restarting clangd language server...
✅ clangd restarted successfully
```

### 场景 2：前端开发

**需求**：快速执行 npm 命令

**配置**：
```json
{
  "deeproute-compile-commands.predefinedCommands": [
    {
      "command": "npm install",
      "cwd": "frontend",
      "alias": "📦 安装依赖"
    },
    {
      "command": "npm run dev",
      "cwd": "frontend",
      "alias": "🚀 启动开发服务器"
    },
    {
      "command": "npm run build",
      "cwd": "frontend",
      "alias": "🏗️ 构建生产版本"
    },
    {
      "command": "npm run lint",
      "cwd": "frontend",
      "alias": "🔍 代码检查"
    }
  ]
}
```

**使用**：
- 点击 "📦 安装依赖" → 自动在 `frontend/` 目录执行 `npm install`
- 点击 "🚀 启动开发服务器" → 启动开发服务器

### 场景 3：Git 工作流

**需求**：快速执行常用 Git 命令

**配置**：
```json
{
  "deeproute-compile-commands.predefinedCommands": [
    {
      "command": "git status -sb",
      "alias": "📊 简洁状态"
    },
    {
      "command": "git diff --stat",
      "alias": "📝 变更统计"
    },
    {
      "command": "git log --oneline --graph --all -20",
      "alias": "🌳 提交树"
    },
    {
      "command": "git fetch origin && git status",
      "alias": "🔄 拉取并检查状态"
    }
  ]
}
```

### 场景 4：执行临时命令

**需求**：执行一次性命令，不需要保存为预设

**步骤**：
1. 点击 TreeView 中的 "⌨️ EXECUTE CUSTOM COMMAND"
2. 输入命令：`find . -name "*.log" -mtime +7 -delete`
3. 输入路径：`logs`（可选，留空使用工作区根目录）
4. 确认执行

**特点**：
- 命令自动保存到历史记录
- 可从历史记录快速重复执行
- 适合调试、探索、一次性任务

### 场景 5：停止长运行命令

**需求**：停止正在执行的命令（如开发服务器）

**方法 1：使用停止按钮**
- 点击 TreeView 工具栏的 `⏹️` 停止按钮
- 或在输出面板右上角点击停止按钮

**方法 2：使用命令面板**
- 按 `Cmd+Shift+P` (macOS) 或 `Ctrl+Shift+P` (Windows/Linux)
- 输入 `Stop Command`
- 选择 `DeepRoute Compile Commands: Stop Current Command`

**输出**：
```
⚠️ Received stop signal, terminating command...
Command terminated by user (signal: SIGTERM)
```

---

## 高级功能

### 1. 命令别名的最佳实践

**使用 Emoji 增强识别度**：
```json
{
  "deeproute-compile-commands.predefinedCommands": [
    {"command": "bazel build //...", "alias": "🔨 编译"},
    {"command": "bazel test //...", "alias": "✅ 测试"},
    {"command": "bazel clean", "alias": "🧹 清理"},
    {"command": "git push", "alias": "📤 推送"},
    {"command": "git pull", "alias": "📥 拉取"},
    {"command": "docker ps", "alias": "🐳 容器列表"},
    {"command": "npm run dev", "alias": "🚀 开发"},
    {"command": "npm run build", "alias": "🏗️ 构建"}
  ]
}
```

**分类命名**：
```json
{
  "deeproute-compile-commands.predefinedCommands": [
    {"command": "...", "alias": "编译 | 完整构建"},
    {"command": "...", "alias": "编译 | 增量构建"},
    {"command": "...", "alias": "测试 | 单元测试"},
    {"command": "...", "alias": "测试 | 集成测试"},
    {"command": "...", "alias": "部署 | 开发环境"},
    {"command": "...", "alias": "部署 | 生产环境"}
  ]
}
```

### 2. 复杂命令组合

**串联多个命令**：
```json
{
  "command": "git pull && npm install && npm run build",
  "alias": "🔄 更新并构建"
}
```

**条件执行**：
```json
{
  "command": "[ -f package.json ] && npm install || echo 'No package.json'",
  "alias": "📦 智能安装"
}
```

**带变量的命令**：
```json
{
  "command": "DATE=$(date +%Y%m%d) && tar -czf backup_${DATE}.tar.gz src/",
  "alias": "💾 备份源代码"
}
```

### 3. 编辑命令别名

**方法 1：右键菜单**
1. 右键点击预设命令
2. 选择 "Edit Alias"
3. 输入新别名
4. 确认保存

**方法 2：直接编辑配置**
1. 打开 `settings.json`
2. 找到对应命令
3. 修改 `alias` 字段
4. 保存文件

### 4. 命令历史管理

**查看历史**：
- 展开 TreeView 中的 "📜 COMMAND HISTORY"
- 显示最近执行的命令

**重复执行**：
- 点击历史记录中的命令

**查看详情**：
- 鼠标悬停在历史命令上
- 显示完整命令和执行路径

**清空历史**：
- 右键 "COMMAND HISTORY"
- 选择 "Clear History"

### 5. 工作区限制

**安全检查**：插件会在首次执行命令时检查工作区根目录

```
预期目录: /home/pinli/codetree/repo
当前目录: /home/pinli/wrong/path

❌ Error: Workspace root mismatch!
Expected: /home/pinli/codetree/repo
Current: /home/pinli/wrong/path
```

**修改限制**：编辑 `src/deepRouteCompileCommands.ts`

```typescript
private readonly REQUIRED_WORKSPACE_ROOT = '/your/required/path';
```

**禁用检查**：注释掉检查代码

```typescript
// 注释掉这些行
// if (actualRoot !== this.REQUIRED_WORKSPACE_ROOT) {
//     vscode.window.showErrorMessage(...);
//     return;
// }
```

---

## 最佳实践

### 1. Docker 容器配置

**推荐容器设置**：
```dockerfile
# 确保容器支持所需工具
FROM ubuntu:20.04

# 安装 bash（必需）
RUN apt-get update && apt-get install -y bash

# 挂载项目目录
VOLUME ["/sandbox"]

# 设置工作目录
WORKDIR /sandbox
```

**启动容器**：
```bash
docker run -d \
  --name my-dev-container \
  -v /home/user/project:/sandbox \
  -u $(id -u):$(id -g) \
  my-dev-image \
  sleep infinity
```

### 2. 命令组织建议

**按功能分组**：
```json
{
  "deeproute-compile-commands.predefinedCommands": [
    // 编译相关
    {"command": "...", "alias": "🔨 完整编译"},
    {"command": "...", "alias": "🔨 增量编译"},
    
    // 测试相关
    {"command": "...", "alias": "✅ 单元测试"},
    {"command": "...", "alias": "✅ 集成测试"},
    
    // 部署相关
    {"command": "...", "alias": "🚀 部署开发"},
    {"command": "...", "alias": "🚀 部署生产"},
    
    // 维护相关
    {"command": "...", "alias": "🧹 清理缓存"},
    {"command": "...", "alias": "🔧 修复依赖"}
  ]
}
```

**限制命令数量**：
- 建议不超过 15 个预设命令
- 过多命令会降低查找效率
- 使用历史记录代替低频命令

### 3. 性能优化

**避免频繁重启容器**：
```bash
# 不要在每次命令后停止容器
# 让容器保持运行状态
docker start my-container  # 一次启动
docker exec ...             # 多次执行
```

**使用增量编译**：
```json
{
  "command": "bazel build //blc/... --config=fast",
  "alias": "⚡ 快速编译"
}
```

**缓存常用路径**：
```json
{
  // 使用 cwd 避免重复的 cd 命令
  "command": "make",
  "cwd": "blc/src/main"  // ✅ 推荐
}

// 而不是
{
  "command": "cd blc/src/main && make"  // ❌ 不推荐
}
```

### 4. 安全注意事项

**避免敏感信息**：
```json
{
  // ❌ 不要在命令中硬编码密码
  "command": "mysql -u root -pMyPassword123 ..."
  
  // ✅ 使用环境变量
  "command": "mysql -u root -p$MYSQL_PASSWORD ..."
}
```

**谨慎使用危险命令**：
```json
{
  // ⚠️ 危险：可能删除重要文件
  "command": "rm -rf *"
  
  // ✅ 更安全：指定具体目录
  "command": "rm -rf build/ dist/ *.log"
}
```

**审查第三方命令**：
```bash
# 在添加为预设命令前，先手动测试
./unknown-script.sh  # 先确认安全
```

---

## 常见问题

### Q1：为什么命令没有在 Docker 容器内执行？

**A**：检查以下几点：

1. **容器名称配置正确吗？**
   ```json
   {
     "deeproute-compile-commands.dockerContainerName": "your-container-name"
   }
   ```

2. **容器是否存在？**
   ```bash
   docker ps -a | grep your-container-name
   ```

3. **容器是否正常启动？**
   - 查看输出面板的启动日志
   - 手动测试：`docker start your-container-name`

4. **容器是否挂载了项目目录？**
   ```bash
   docker inspect your-container-name | grep Mounts -A 10
   ```

### Q2：为什么 clangd 没有自动重启？

**A**：可能的原因：

1. **clangd 扩展未安装**
   - 安装 `clangd` 扩展：搜索 "clangd" 并安装

2. **compile_commands.json 未更新**
   - 检查文件修改时间：`ls -l compile_commands.json`
   - 确保编译确实生成了新的编译数据库

3. **路径替换失败**
   - 查看输出面板的替换日志
   - 确认容器路径和本地路径的映射关系

4. **手动重启测试**
   - 按 `Cmd+Shift+P` → 输入 "clangd: Restart language server"
   - 如果手动重启有效，说明自动化有问题

### Q3：命令执行失败，如何调试？

**A**：按以下步骤排查：

1. **查看完整错误信息**
   - 打开输出面板（View → Output → DeepRoute Compile Commands）
   - 查找红色错误消息和退出码

2. **手动测试命令**
   ```bash
   # 本地执行
   cd /home/user/project
   your-command
   
   # Docker 执行
   docker exec -it your-container bash
   cd /sandbox
   your-command
   ```

3. **检查路径是否正确**
   ```bash
   # 确认 cwd 配置
   cd /home/user/project/your-cwd
   ls -la  # 确认文件存在
   ```

4. **查看命令历史**
   - 检查历史记录中的命令是否正确
   - 对比手动执行和插件执行的差异

### Q4：输出中有乱码怎么办？

**A**：v1.6.0+ 已修复此问题，如仍有乱码：

1. **确认插件版本**
   - 应为 v1.6.0 或更高
   - 检查：扩展列表 → DeepRoute Compile Commands → 版本号

2. **重新加载窗口**
   - 按 `F1` → 输入 "Reload Window"

3. **检查输出编码**
   - 确保命令输出为 UTF-8 编码

### Q5：如何在多个项目间共享配置？

**A**：使用用户级配置：

1. **打开用户配置**
   ```bash
   # macOS/Linux
   ~/.cursor/User/settings.json
   
   # Windows
   %APPDATA%\Cursor\User\settings.json
   ```

2. **添加全局命令**
   ```json
   {
     "deeproute-compile-commands.predefinedCommands": [
       {"command": "git status", "alias": "📊 Git 状态"},
       {"command": "git pull", "alias": "📥 Git 拉取"}
     ]
   }
   ```

3. **项目特定配置**
   - 在 `.vscode/settings.json` 中覆盖或扩展
   - 项目配置优先级更高

### Q6：命令历史保存在哪里？

**A**：历史保存在 VS Code 的全局存储中：

- **存储位置**：扩展的 `globalState`
- **持久化**：插件更新或 IDE 重启后保留
- **清空方法**：右键 COMMAND HISTORY → Clear History

### Q7：可以在 SSH 远程开发中使用吗？

**A**：完全支持！

1. **连接到远程主机**
   - 使用 VS Code Remote-SSH 扩展

2. **配置远程环境**
   - 在远程主机的 `settings.json` 中配置命令

3. **执行命令**
   - 命令在远程主机上执行
   - 支持远程 Docker 容器

---

## 故障排查

### 问题：插件图标不显示

**症状**：安装后左侧活动栏没有插件图标

**解决方案**：
1. 重启 Cursor IDE
2. 检查扩展是否已启用：扩展列表 → DeepRoute Compile Commands → "启用"
3. 查看开发者控制台：Help → Toggle Developer Tools → Console 标签

### 问题：Docker 容器启动失败

**症状**：输出显示 "Failed to start container"

**可能原因**：
1. **容器名称错误**
   ```bash
   docker ps -a  # 查看所有容器名称
   ```

2. **Docker 守护进程未运行**
   ```bash
   sudo systemctl start docker  # Linux
   open -a Docker               # macOS
   ```

3. **权限问题**
   ```bash
   sudo usermod -aG docker $USER  # 添加用户到 docker 组
   # 注销并重新登录
   ```

4. **容器配置错误**
   ```bash
   docker logs your-container  # 查看容器日志
   docker inspect your-container  # 检查配置
   ```

### 问题：路径映射不正确

**症状**：在容器内执行命令，但找不到文件

**检查清单**：
1. **确认容器挂载**
   ```bash
   docker inspect your-container | grep -A 5 Mounts
   # 应该看到：/home/user/project -> /sandbox
   ```

2. **确认 cwd 配置**
   ```json
   {
     "command": "ls",
     "cwd": "blc"  // 相对于工作区根目录
   }
   ```

3. **确认工作区根目录**
   - 输出面板显示的 "Working Dir" 是否正确

4. **测试路径**
   ```bash
   docker exec -it your-container bash
   cd /sandbox/blc
   pwd  # 应显示 /sandbox/blc
   ls   # 应显示项目文件
   ```

### 问题：compile_commands.json 路径未替换

**症状**：clangd 跳转失败，显示 "/sandbox/..." 路径

**解决方案**：
1. **检查文件权限**
   ```bash
   ls -l compile_commands.json
   # 应该有写权限
   chmod 644 compile_commands.json
   ```

2. **检查 sed 命令**
   ```bash
   which sed
   # 应该返回路径
   ```

3. **查看替换日志**
   - 输出面板应显示 "Successfully replaced X lines"
   - 如果没有，说明替换未执行

4. **手动验证**
   ```bash
   grep -c "/sandbox" compile_commands.json
   # 应该返回 0（没有 /sandbox 路径）
   ```

### 问题：输出面板不自动打开

**症状**：执行命令后没有看到输出

**解决方案**：
1. **手动打开输出面板**
   - View → Output
   - 下拉选择 "DeepRoute Compile Commands"

2. **检查输出重定向**
   - 某些命令可能将输出重定向到文件

3. **检查命令是否在后台运行**
   - 后台命令（`&` 结尾）不会显示实时输出

### 问题：命令卡住不响应

**症状**：命令执行后没有任何输出，也不结束

**可能原因**：
1. **交互式命令**
   - 避免使用需要用户输入的命令（vim、top 等）

2. **命令等待输入**
   - 某些命令可能等待 stdin 输入

3. **超时设置**
   - 命令可能需要很长时间才能完成

**解决方案**：
1. 点击停止按钮终止命令
2. 修改命令为非交互式
3. 添加超时参数：`timeout 300 your-command`

---

## 📞 支持与反馈

### 获取帮助

- **查看日志**：View → Output → DeepRoute Compile Commands
- **开发者工具**：Help → Toggle Developer Tools
- **重启插件**：按 `F1` → "Reload Window"

### 报告问题

如果遇到问题，请提供以下信息：

1. **插件版本**：v1.6.2
2. **Cursor 版本**：Help → About
3. **操作系统**：macOS / Linux / Windows
4. **配置内容**：`settings.json` 相关部分
5. **错误日志**：输出面板完整日志
6. **复现步骤**：详细操作步骤

### 功能建议

欢迎提出新功能建议！请描述：
- 使用场景
- 期望效果
- 可能的实现方式

---

## 🎉 总结

### 核心价值

- ⚡ **提升效率** - 一键执行常用命令，节省 80% 的重复输入时间
- 🐳 **无缝集成** - Docker 容器开发如同本地开发一样流畅
- 🔧 **智能联动** - 自动处理 clangd 集成，开箱即用
- 📝 **历史记录** - 永不丢失的命令历史，快速重复执行

### 适用人群

- ✅ C/C++ 开发者（Bazel、CMake 等）
- ✅ 前端开发者（npm、yarn、pnpm 等）
- ✅ Docker 容器开发者
- ✅ 需要频繁执行 Shell 命令的任何开发者

### 开始使用

1. 安装插件
2. 配置 Docker（如需要）
3. 添加常用命令
4. 享受高效开发！

---

**祝你编码愉快！** 🚀

**版本**: 1.6.2  
**最后更新**: 2026-01-21  
**作者**: DeepRoute Team
